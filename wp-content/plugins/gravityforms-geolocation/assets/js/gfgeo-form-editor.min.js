jQuery(document).ready(function(e){var o={form:form,maps:{},init:function(){o.form_editor_init(),jQuery.each(o.form.fields,function(e,t){"gfgeo_map"==t.type&&o.gfgeo_render_map_admin(jQuery("#gfgeo-map-"+o.form.id+"_"+t.id).data())}),o.set_marker_position(),o.set_map_options(),o.update_fields_dynamically()},form_editor_init:function(){fieldSettings.post_custom_field+=", .gfgeo-dynamic-location-field, .gfgeo-geocoder-id",fieldSettings.hidden+=", .css_class_setting, .gfgeo-dynamic-location-field, .gfgeo-geocoder-id",fieldSettings.address+=", .post_custom_field_setting, .gfgeo-geocoder-id, .gfgeo-infield-locator-button",fieldSettings.address+=", .gfgeo-address-autocomplete, .gfgeo-address-autocomplete-country",fieldSettings.address+=", .gfgeo-address-autocomplete-placeholder, .gfgeo-address-autocomplete-desc",fieldSettings.address+=", .gfgeo-address-autocomplete-types",fieldSettings.address+=", .gfgeo-address-autocomplete-locator-bounds, .gfgeo-address-autocomplete-bounds",fieldSettings.text+=", .gfgeo-dynamic-location-field, .gfgeo-geocoder-id",fieldSettings.checkbox+=", .gfgeo-dynamic-location-field, .gfgeo-geocoder-id",fieldSettings.select+=", .gfgeo-dynamic-location-field, .gfgeo-geocoder-id",fieldSettings.radio+=", .gfgeo-dynamic-location-field, .gfgeo-geocoder-id",fieldSettings.multiselect+=", .gfgeo-dynamic-location-field, .gfgeo-geocoder-id",jQuery(document).bind("gform_field_added",function(e,t,g){"gfgeo_map"==g.type&&o.gfgeo_render_map_admin(jQuery("#gfgeo-map-"+t.id+"_"+g.id).data())}),jQuery("#gfgeo-gmw-post-integration").change(function(){jQuery(this).is(":checked")?jQuery(".gfgeo-gmw-post-integration-wrapper").show():jQuery(".gfgeo-gmw-post-integration-wrapper").hide()}),jQuery(document).bind("gform_load_field_settings",function(e,o,t){if("undefined"!=typeof t.fields)var g=t.fields;else var g=[];jQuery(jQuery("select#gfgeo-geocoder-id, select#gfgeo-gmw-post-integration-phone, select#gfgeo-gmw-post-integration-fax, select#gfgeo-gmw-post-integration-email, select#gfgeo-gmw-post-integration-website").find("option:gt(0)").remove()),jQuery(g).each(function(){"gfgeo_geocoder"==this.type?jQuery(jQuery("select#gfgeo-geocoder-id").append(jQuery("<option>").attr("value",this.id).text("Geocoder ID - "+this.id))):-1!=jQuery.inArray(this.type,["post_custom_field","phone","email","website","text","number","hidden","checkbox","select","radio","paragraph","html"])&&jQuery(jQuery("select#gfgeo-gmw-post-integration-phone, select#gfgeo-gmw-post-integration-fax, select#gfgeo-gmw-post-integration-email, select#gfgeo-gmw-post-integration-website").append(jQuery("<option>").attr("value",this.id).text(this.label+" - ( field ID "+this.id+")")))});var a=["status","place_name","street_number","street_name","street","subpremise","premise","neighborhood","city","county","region_code","region_name","postcode","country_code","country_name","address","formatted_address","latitude","longitude"];jQuery("#gfgeo-geocoder-id").val(o.gfgeo_geocoder_id),jQuery("#gfgeo-default-latitude").val(o.gfgeo_default_latitude),jQuery("#gfgeo-default-longitude").val(o.gfgeo_default_longitude),jQuery("#gfgeo-page-locator").attr("checked",1==o.gfgeo_page_locator),jQuery("#gfgeo-google-maps-link").attr("checked",1==o.gfgeo_google_maps_link),jQuery("#gfgeo-gmw-post-integration").attr("checked",1==o.gfgeo_gmw_post_integration),jQuery("#gfgeo-gmw-post-integration-phone").val(o.gfgeo_gmw_post_integration_phone),jQuery("#gfgeo-gmw-post-integration-fax").val(o.gfgeo_gmw_post_integration_fax),jQuery("#gfgeo-gmw-post-integration-email").val(o.gfgeo_gmw_post_integration_email),jQuery("#gfgeo-gmw-post-integration-website").val(o.gfgeo_gmw_post_integration_website),jQuery("#gfgeo-gmw-user-integration").attr("checked",1==o.gfgeo_gmw_user_integration),jQuery("#gfgeo-user-meta-field").val(o.gfgeo_user_meta_field),jQuery.each(a,function(e,t){jQuery("#gfgeo_"+t+"_post_meta").val(o["gfgeo_"+t+"_post_meta"]),jQuery("#gfgeo_"+t+"_user_meta").val(o["gfgeo_"+t+"_user_meta"]),jQuery("#gfgeo_"+t+"_xprofile_field").val(o["gfgeo_"+t+"_xprofile_field"])}),jQuery("#gfgeo-dynamic-location-field").val(o.gfgeo_dynamic_location_field),jQuery("#gfgeo-locator-button-label").val(o.gfgeo_locator_button_label),jQuery("#gfgeo-infield-locator-button").attr("checked",1==o.gfgeo_infield_locator_button),jQuery("#gfgeo-location-found-message").val(o.gfgeo_location_found_message),jQuery("#gfgeo-hide-location-failed-message").attr("checked",1==o.gfgeo_hide_location_failed_message),jQuery("#gfgeo-ip-locator-status").val(o.gfgeo_ip_locator_status),jQuery("#gfgeo-address-autocomplete").attr("checked",1==o.gfgeo_address_autocomplete),jQuery("#gfgeo-address-autocomplete-types").val(o.gfgeo_address_autocomplete_types),jQuery("#gfgeo-address-autocomplete-country").val(o.gfgeo_address_autocomplete_country),jQuery("#gfgeo-address-autocomplete-locator-bounds").attr("checked",1==o.gfgeo_address_autocomplete_locator_bounds),jQuery("#gfgeo-address-autocomplete-bounds").val(o.gfgeo_address_autocomplete_bounds),jQuery("#gfgeo-address-autocomplete-placeholder").val(o.gfgeo_address_autocomplete_placeholder),jQuery("#gfgeo-address-autocomplete-desc").val(o.gfgeo_address_autocomplete_desc),jQuery("#gfgeo-latitude-placeholder").val(o.gfgeo_latitude_placeholder),jQuery("#gfgeo-longitude-placeholder").val(o.gfgeo_longitude_placeholder),jQuery("#gfgeo-custom-field-method").attr("checked",1==o.gfgeo_custom_field_method),jQuery("#gfgeo-map-default-latitude").val(o.gfgeo_map_default_latitude),jQuery("#gfgeo-map-default-longitude").val(o.gfgeo_map_default_longitude),jQuery("#gfgeo-map-width").val(o.gfgeo_map_width),jQuery("#gfgeo-map-height").val(o.gfgeo_map_height),jQuery("#gfgeo-map-styles").val(o.gfgeo_map_styles),jQuery("#gfgeo-map-icon").val(o.gfgeo_map_icon),jQuery("#gfgeo-map-type").val(o.gfgeo_map_type),jQuery("#gfgeo-zoom-level").val(o.gfgeo_zoom_level),jQuery("#gfgeo-draggable-marker").attr("checked",1==o.gfgeo_draggable_marker),jQuery("#gfgeo-set-marker-on-click").attr("checked",1==o.gfgeo_set_marker_on_click),jQuery("#gfgeo-map-scroll-wheel").attr("checked",1==o.gfgeo_map_scroll_wheel),jQuery("#gfgeo-disable-address-output").attr("checked",1==o.gfgeo_disable_address_output),jQuery("#gfgeo-page-locator").attr("disabled",!1),jQuery("#gfgeo-gmw-post-integration").attr("disabled",!1),jQuery("#gfgeo-gmw-user-integration").attr("disabled",!1),"gfgeo_geocoder"==o.type&&(jQuery("#gfgeo-gmw-post-integration").is(":checked")?jQuery(".gfgeo-gmw-post-integration-wrapper").show():jQuery(".gfgeo-gmw-post-integration-wrapper").hide()),jQuery.each(t.fields,function(e,t){"gfgeo_geocoder"==t.type&&(void 0!=t.gfgeo_page_locator&&1==t.gfgeo_page_locator&&t.id!=o.id&&jQuery("#gfgeo-page-locator").attr("disabled",!0),void 0!=t.gfgeo_gmw_post_integration&&1==t.gfgeo_gmw_post_integration&&t.id!=o.id&&jQuery("#gfgeo-gmw-post-integration").attr("disabled",!0),void 0!=t.gfgeo_gmw_user_integration&&1==t.gfgeo_gmw_user_integration&&t.id!=o.id&&jQuery("#gfgeo-gmw-user-integration").attr("disabled",!0))})})},update_fields_dynamically:function(){jQuery("#gfgeo-locator-button-label").keyup(function(){jQuery(this).closest("li.gfield").find(".gfgeo-locator-button").val(jQuery(this).val())}),jQuery(".coordinates-placeholder").keyup(function(){field=jQuery(this).data("field"),jQuery(this).closest("li.gfield").find(".gfgeo-"+field+"-field").attr("placeholder",jQuery(this).val())})},gfgeo_render_map_admin:function(e){o.maps[e.map_id]={},o.maps[e.map_id].args=e,o.maps[e.map_id].latlng=new google.maps.LatLng(e.latitude,e.longitude),o.maps[e.map_id].options={zoom:parseInt(e.zoom_level),center:o.maps[e.map_id].latlng,mapTypeId:google.maps.MapTypeId[e.map_type],backgroundColor:"#f1f1f1",scrollwheel:!1,draggable:!1,disableDefaultUI:!0,zoomControl:!0},o.maps[e.map_id].map=new google.maps.Map(document.getElementById("gfgeo-map-"+e.map_id),o.maps[e.map_id].options),o.maps[e.map_id].marker=new google.maps.Marker({position:o.maps[e.map_id].latlng,map:o.maps[e.map_id].map,draggable:!1,icon:e.map_marker}),google.maps.event.addListener(o.maps[e.map_id].marker,"dragend",function(t){o.geocoder_id=e.geocoder_id,o.geocoder("map",[t.latLng.lat(),t.latLng.lng()],o.map_geocoder_success,!1)}),jQuery("#frm_field_"+e.map_id+"_container").bind("show",function(){setTimeout(function(){google.maps.event.trigger(o.maps[e.map_id].map,"resize"),o.maps[e.map_id].map.panTo(o.maps[e.map_id].marker.position)},300)})},set_marker_position:function(){e("#gfgeo-map-default-latitude, #gfgeo-map-default-longitude").on("keydown focusout",function(t){if(("keydown"==t.type&&13==t.which||"focusout"==t.type)&&0!=e.trim(e("#gfgeo-map-default-latitude").val()).length&&0!=e.trim(e("#gfgeo-map-default-longitude").val()).length){var g=jQuery(this).closest("li.gfield").find(".gfgeo-map").data("map_id");latlng={lat:parseFloat(e("#gfgeo-map-default-latitude").val()),lng:parseFloat(e("#gfgeo-map-default-longitude").val())},geocoder=new google.maps.Geocoder,geocoder.geocode({location:latlng},function(e,t){t==google.maps.GeocoderStatus.OK&&(latlng=new google.maps.LatLng(e[0].geometry.location.lat(),e[0].geometry.location.lng()),o.maps[g].marker.setPosition(latlng),o.maps[g].map.panTo(latlng))})}})},set_map_options:function(){jQuery("#gfgeo-map-type, #gfgeo-zoom-level").on("change",function(){fieldId=jQuery(this).closest("li.gfield").find(".gfgeo-map").data("map_id"),value=jQuery(this).val(),"gfgeo-map-type"==jQuery(this).attr("id")?o.maps[fieldId].map.setMapTypeId(google.maps.MapTypeId[value]):o.maps[fieldId].map.setZoom(parseInt(value))})}};o.init()});